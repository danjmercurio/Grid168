<%= stylesheet_link_tag 'offers' %>
<%= form_for @offer, :class => 'form-inline' do |f| -%>
    <%= f.hidden_field :time_cells, :value => @offer.time_cells %>
    <%= f.hidden_field :total_hours %>
    <div class="row">
      <div class="col-md-6">
        <h1><%= @outlet.name %></h1>
        <div>
          <a href="#">
            <button type="button" class="btn btn-primary" id="selectAll">Select All</button>
          </a>
          <a href="#">
            <button type="button" class="btn btn-primary" id="invert">Invert Selection</button>
          </a>
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <h3><strong><%= f.label :dma, 'DMA:' %></strong> <%= @outlet.dma.name rescue "None" %></h3>
          <h3><strong><%= f.label :subs, 'Subs:' %></strong> <%= number_with_delimiter @outlet.subs %></h3>

          <label class="sr-only" for="exampleInputAmount">Amount (in dollars)</label>
          <div class="input-group">
            <div class="input-group-addon">$</div>
            <%= f.text_field :dollar_amount, :class => 'form-control', :placeholder => @offer.dollar_amount, :style => 'width: 30%;' %>
          </div>
        </div>
      </div>
    </div> <!-- end row -->

    <div class="row">
      <div class="col-md-8 hours_div">
        <div class="gridContainer">
          <div class="gridContainerHeader" style="display:flex;">
            <% [['Monday', 0], ['Tuesday', 1], ['Wednesday', 2], ['Thursday', 3], ['Friday', 4], ['Saturday', 5], ['Sunday', 6]].each do |day, num| -%>
                <div class="day">
                  <div class="dayLabel"><%= day %></div>
                  <% start = Time.new(0) %>
                  <% fin = start + (60 * 60 * 24) %>
                  <% while start < fin do -%>
                      <div class="cell" data-selected="false" data-day="<%= num %>" data-time="<%= start.strftime('%H:%M') %>"><%= start.strftime('%H:%M') %></div>
                      <% start += 30.minutes %>
                  <% end %>
                </div>
            <% end %>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="rate_info">
          <h1>Rate</h1>
          <span>Hourly Rate: <%= number_to_currency @offer.hourly_rate %></span>
          <span class="pull-right">Total Hours: <%= @offer.total_hours %></span>
          <table class="table table-condensed">
            <thead>
            <tr>
              <td>Offer</td>
              <td>Hours</td>
              <td>Rate</td>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td>Weekly</td>
              <td><span class="hours" id="weekly_hours"></span><%= f.hidden_field :weekly_hours %></td>
              <td>
                <div class="input-group col-xs-6">
                  <div class="input-group-addon">$</div>
                  <%= f.text_field :weekly_offer, :class => 'form-control offerInput' %>
                </div>
            </tr>
            <tr>
              <td>Monthy</td>
              <td><span class="hours" id="monthly_hours"></span><%= f.hidden_field :monthly_hours, :value => @offer.monthly_hours %></td>
              <td>
                <div class="input-group col-xs-6">
                  <div class="input-group-addon">$</div>
                  <%= f.text_field :monthly_offer, :class => 'form-control offerInput' %>
                </div>
              </td>
            </tr>
            <tr>
              <td>Yearly</td>
              <td><span class="hours" id="yearly_hours"></span><%= f.hidden_field :yearly_hours, :value => @offer.yearly_hours %></td>
              <td>
                <div class="input-group col-xs-6">
                  <div class="input-group-addon">$</div>
                  <%= f.text_field :yearly_offer, :class => 'form-control offerInput' %>
                </div>
              </td>
            </tr>
            </tbody>
          </table>
          <div>
            <button type="button" id="calculate" class="btn btn-primary">Calculate</button>
            <button type="button" id="reset" class="btn btn-default">Reset</button>
          </div>
        </div>
        <br/>
        <div>
          <h1>Programmers</h1>
          <% if @programmers.empty? %>
              You must create a programmer record to associate with this offer before you can save it.
          <% else %>
              <%= select('offer', 'programmer_ids', Programmer.order(:name).collect { |d| [d.name, d.id] }) %>
          <% end %>
          <div class="pull-right"><%= link_to 'Add a programmer', new_programmer_url, :class => 'btn btn-default' %></div>
        </div>
        <br/>
        <div>
          <h1>Notes</h1>
          <p>Add a note to the Gross Rate Worksheet</p>
          <%= f.text_area :grNotes, :class => 'form-control offer_note' %>
          <br/>
          <p>Add a note after Dayparts</p>
          <%= f.text_area :dpNotes, :class => 'form-control offer_note' %>
        </div>
        <br/>
        <div>
          <p>Available Date</p>
          <%= f.text_field :available_date, :class => 'form-control dp' %>
        </div>
        <br/>
        <div>
          <%= f.submit 'Save Offer', :class => 'btn btn-success btn-lg' %>
        </div>
      </div>
    </div>
<% end %>
